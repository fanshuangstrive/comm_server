# comm_server

************************************************************************
************************************************************************
************************************************************************
*********************   转发器使用说明    ******************************
************************************************************************
************************************************************************
************************************************************************

* 使用root用户,创建用户,
  groupadd comm
  useradd -g comm comm
  passwd comm
* 配置comm用户的环境变量 , 配置完需要重新加载环境变量
  ~/.bash_profile  
	export TUXDIR=/home/tuxedo/tuxedo11gR1
	export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$TUXDIR/lib
	export PATH=$TUXDIR/bin:$PATH 
	export WSNADDR=//128.5.36.166:15001  #自来水公司IP和端口            

* 测试环境目录
  ~/bin/comm_server        #可执行程序
  ~/etc/comm_server.cfg    #配置文件
  ~/log                    #日志目录

* 通讯协议 
  * 内部系统与转发器   socket
        报文格式：8位长度$响应码$Tuxedo交易码$数据包$
            分隔符: $
   	    包头：8位长度,不足时左补零
   	    包体：$响应码$Tuxedo交易码$数据包$
   	    长度: 包体长度
   	    响应码: 0 : 成功 
                    1 : 超时 
                    2 : Tuxedo失败  
                    9 : 默认 


  * 转发器与XXX公司 tuxedo
        tuxedo交易码，数据包
               
